# Panasu

## Panasu（ぱなす）とは

`Panasu`は、
ひとまとまりのドキュメント群をpandocでまとめて変換する作業を支援するためのもろもろです。

pandocはドキュメントの形式を変換してくれる便利なツールです。
しかし、ひとまとまりのドキュメント群を互いの関連性を保ったままpandocで変換しようとすると、
色々面倒があります。
この面倒をなんとかします。

pandocは広く使われているツールなんで、
みなさん各自でなんとかしてるんじゃないかとも思うんですが、
公開されているものが見当たらないので作りました。

「面倒をなんとかする」は例えば以下のものです。

* ドキュメントの変換に伴い相対リンクが切れてしまうのをなんとかします。
  例えば、一群のドキュメント内の`a.md`への相対リンクは変換後の`a.html`を指すように書き換えます。
* 変換しないファイル（画像とか）へのリンクが切れてしまう可能性があるのも何とかします。
    * 変換対象外のファイルへのリンクを元のファイルを参照し続けるように変更します。
      例えば、`From/a.md`を`To/a.html`へ変換する際に、
      `From/a.md`中に`image.png`への画像リンクがあった場合、
      `To/a.html`中では`../From/image.png`となるように書き換えます。
    * 一方、一群のドキュメントを変換後もひとまとまりで扱いたい場合のために、
      変換対象外ファイルを出力フォルダへ単純コピーするモードも用意しています。
      この場合、これらファイルへのリンクは変更されません。
* pandocでmarkdownなどをスタンドアロンなhtmlへ変換する場合に、
  タイトルの扱いが微妙に面倒なのを何とかして、たいていの場合気にしなくてよいようにします。
* 一群のドキュメントの変換全体に対して共通のパラメーター（要するにpandocに与えるメタデータ）を指定する方法を提供します。
* 変換後のHTMLに埋め込むcssなど、
  変換後のドキュメントの位置によって相対リンクのパスを調整しなければならないようなリンクをなんとかします。
  例えば、`To/a.html`に埋め込むcssへのリンクは`styles/style.css`で、
  `To/y/z.html`に埋め込む場合のcssへのリンクは`../styles/style.css`にしなければならない、
  といった調整をなんとかします。

具体的にどうやるかは[チュートリアル](Docs/Tutorial.ja.md)を参照してください。

また、この後、ひとまとまりのドキュメント群をひとつのドキュメントに結合する際に発生する面倒もなんとかする予定です。

とりあえず自分で使う用があるために急いで作ったもので、
ドキュメントもチュートリアルくらいしかありませんが、
お役に立つようならば、お使いください。


## Panasuのしくみ

Panasuは、ざっと以下から構成されています。

#### pandocフィルター

pandocでドキュメントを変換する際に、
変換をカスタマイズするフィルターを提供します。
このフィルターがリンクの書き換えや、
メタデータ中のマクロ展開などを行います。

#### スクリプト

ディレクトリ下の一群のドキュメントそれぞれに対して、
pandocを用いた変換を行うスクリプトを提供します。
変換の際には上のpandocフィルターを用いて、
変換をカスタマイズします。


## ドキュメントなど

* [ドキュメント](Docs/README.ja.md)
